<%- include('../partials/header') %>

<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <!-- 로고 -->
      <div class="text-center mb-4">
        <img src="/images/CI.png" alt="Logo" class="mb-3" width="80">
        <h3>계정 생성하기</h3>
      </div>

      <!-- 프로필 사진 등록 -->
      <div class="text-center mb-4">
        <label for="profileImage" class="d-block">
          <img id="profilePreview" src="https://placehold.co/120x120" alt="Profile Image" class="rounded-circle"
            style="width: 120px; height: 120px; object-fit: cover; cursor: pointer;">
        </label>
        <!-- 첫 번째 input은 이미지를 클릭하면 파일 선택 창을 열기 위한 input -->
        <input type="file" id="profileImage" accept="image/*" class="d-none" onchange="previewImage(event)">
        <small class="form-text text-muted">위 이미지를 클릭하고 프로필 사진을 등록해보세요</small>
        
        <!-- 두 번째 input은 실제 파일을 선택할 수 있는 input (파일을 선택 후 preview가 갱신됨) -->
        <input type="file" id="profileImage2" class="form-control-file mt-2" onchange="previewImage(event)">
      </div>

      <!-- 회원가입 폼 -->
      <form>
        <div class="form-group mb-3">
          <label for="name">이름</label>
          <input type="text" class="form-control" id="name" placeholder="이름을 입력하세요">
        </div>
        <div class="form-group mb-3">
          <label for="email">이메일</label>
          <input type="email" class="form-control" id="email" placeholder="이메일을 입력하세요">
        </div>
        <div class="form-group mb-3">
          <label for="password">비밀번호</label>
          <input type="password" class="form-control" id="password" placeholder="비밀번호를 입력하세요">
        </div>
        <div class="form-group mb-3">
          <label for="confirmPassword">비밀번호 확인</label>
          <input type="password" class="form-control" id="confirmPassword" placeholder="비밀번호를 다시 입력하세요">
        </div>
        <button type="submit" class="btn btn-dark w-100 mb-3">회원가입하기</button>
      </form>

      <!-- 로그인 링크 -->
      <div class="text-center">
        <p>이미 계정을 가지고 있나요? <a href="/login">로그인</a></p>
      </div>
    </div>
  </div>
</div>

<%- include('../partials/footer') %>

<script>
  // 이미지 미리보기 기능
  function previewImage(event) {
    const reader = new FileReader();
    reader.onload = function() {
      const output = document.getElementById('profilePreview');
      output.src = reader.result; // 선택된 이미지를 미리보기로 설정
    };
    reader.readAsDataURL(event.target.files[0]); // 파일을 읽어서 Data URL로 변환
  }
</script>
