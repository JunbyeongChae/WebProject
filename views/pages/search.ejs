<!-- views/pages/search.ejs -->

<%- include('../partials/header') %>

<!-- CSS 파일 포함 -->
<link rel="stylesheet" href="/stylesheets/style.css">
<style>
.container {
  display: flex;
  justify-content: center; /* 가로 가운데 정렬 */
}
.row { 
  display: flex; 
  justify-content: center; /* 가로 가운데 정렬 */
  flex-wrap: wrap; /* 줄바꿈 허용 */ 
  width: 100%;
}
</style>

<div class="container my-5">
  <div class="row">
    <!-- 왼쪽 칸 -->
    <div class="col-md-3 d-flex flex-column">
      <h5>Search</h5>
      <!-- 검색어 입력창과 버튼 -->
      <div class="mb-3">
        <input type="text" class="form-control mb-2" placeholder="음식점을 검색하세요">
        <button class="btn btn-dark w-100">Serch</button>
      </div>
      <!-- 옵션 선택 콤보박스 -->
      <!-- 241230 박제성 지역명 변경 및 카테고리 id 변경.  -->
      <div>
        <label for="region" class="font-weight-bold">Select Region:</label>
        <!-- 2025-01-07 이희범 name 추가 -->
        <select id="regionSelect" name="region" class="form-control">
          <option>광명시</option>
          <option>구로구</option>
          <option>금천구</option>
        </select>
      </div>
      <div>
        <label for="Category" class="font-weight-bold">Select Category:</label>
        <!-- 2025-01-07 이희범 name 추가 -->
        <select id="categorySelect" name="category" class="form-control">
          <option>한식</option>
          <option>중식</option>
          <option>양식</option>
          <option>일식</option>
          <option>카페</option>
        </select>
      </div>
    </div>

    <!-- 중간 칸: 검색 결과 -->
    <div class="col-md-5 d-flex flex-column">
      <h5>검색 결과</h5>
      <!-- 검색 결과 스크롤 영역 -->
      <div id="searchResultsContainer" class="border p-2 rounded flex-grow-1 overflow-auto" style="max-height: 600px;">
        <div class="row justify-content-start"> <!-- 2025/01/07 wonjun 검색결과 왼쪽 정렬 -->
          <% const results = [
            { img: 'https://placehold.co/100x100', title: 'The Italian Corner', info: 'Italian • $$' },
            { img: 'https://placehold.co/100x100', title: 'Sushi Master', info: 'Japanese • $$$' },
            { img: 'https://placehold.co/100x100', title: 'Burger House', info: 'American • $' },
            { img: 'https://placehold.co/100x100', title: 'The Italian Corner', info: 'Italian • $$' },
            { img: 'https://placehold.co/100x100', title: 'Sushi Master', info: 'Japanese • $$$' },
            { img: 'https://placehold.co/100x100', title: 'Burger House', info: 'American • $' },
            { img: 'https://placehold.co/100x100', title: 'Cafe Delight', info: 'Cafe • $' },
            { img: 'https://placehold.co/100x100', title: 'The Grand Bistro', info: 'French • $$$' },
            { img: 'https://placehold.co/100x100', title: 'Taco Fiesta', info: 'Mexican • $' }
          ]; %>

          <% results.forEach(result => { %>
            <div class="col-md-6 mb-3">
              <div class="card">
                <a href="/details">
                  <img src="<%= result.img %>" class="card-img-top" alt="<%= result.title %>">
                </a>
                <div class="card-body text-center">
                  <h6 class="card-title"><%= result.title %></h6>
                  <p class="card-text"><%= result.info %></p>
                </div>
              </div>
            </div>
          <% }); %>
        </div>
      </div>
    </div>

    <!-- 오른쪽 칸: 지도 -->
    <div class="col-md-4">
      <h5>지도</h5>
      <div id="map" class="border rounded" style="height: 100%; background-color: #e9ecef;">
        <p class="text-center my-5">Map Area</p>
      </div>
    </div>
  </div>
</div>

<%- include('../partials/footer') %>
<!-- 241224 박제성 맵 호출 및 스크립트 호출 -->
<!-- 카카오 지도 API 스크립트 -->
<script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=<%= javascriptKey %>&autoload=false&libraries=services"></script>

<script type="module" src="/javascript/search.js"></script>
<!-- 241224 맵 호출 및 스크립트 호출 끝-->